# Symfony Product API â€“ Test Technique Backend

## Contexte

Ce projet est un test technique Backend rÃ©alisÃ© avec **Symfony**.  
Il permet de gÃ©rer des **produits** et des **catÃ©gories**, avec la possibilitÃ©
daffecter **une ou plusieurs catÃ©gories Ã  un produit**

Le projet fournit :
- une **API REST** (API Platform),
- un **back-office dâ€™administration** (EasyAdmin),
- un **traitement asynchrone minimal** (Symfony Messenger),
- une **infrastructure Docker** pour un lancement simple.

---

##  Stack technique

- Symfony 6.4+
- PHP 8.2
- API Platform
- Doctrine ORM
- EasyAdmin 4
- Symfony Messenger
- MySQL
- Docker & Docker Compose

---

## Installation & Lancement

### 1 PrÃ©requis

- Docker
- Docker Compose

---

### 2 Lancer le projet

Ã€ la racine du projet :

```bash
docker compose up -d

### 3 AccÃ©der au container PHP
docker compose exec php bash

### 4 Installer les dÃ©pendances 
composer install

### 5 Base de donnÃ©es & migrations
php bin/console doctrine:database:create
php bin/console make:migration
php bin/console doctrine:migrations:migrate

 AccÃ¨s Ã  lâ€™application

Application (Nginx) :
ğŸ‘‰ http://localhost:8080

Documentation API (Swagger / Hydra) :
ğŸ‘‰ http://localhost:8080/api

Back-office EasyAdmin :
ğŸ‘‰ http://localhost:8080/admin

ğŸ“¦ ModÃ¨le de donnÃ©es
Product

id

designation (obligatoire)

relation ManyToMany avec Category

Category

id

designation (obligatoire)

relation ManyToMany avec Product

Les migrations Doctrine sont incluses.

ğŸ”Œ API REST (API Platform)
Endpoints principaux
Produits

GET /api/products

GET /api/products/{id}

POST /api/products

PATCH /api/products/{id}

CatÃ©gories

GET /api/categories

POST /api/categories

Affectation catÃ©gories â†” produit

Exemple de requÃªte :

PATCH /api/products/1

{
  "categories": [
    "/api/categories/1",
    "/api/categories/2"
  ]
}

ğŸ§‘â€ğŸ’¼ Back-office (EasyAdmin)

Le back-office permet :

CRUD Product

crÃ©ation / Ã©dition / suppression

champ multi-sÃ©lection pour les catÃ©gories

CRUD Category

AccÃ¨s :

http://localhost:8080/admin

Asynchrone â€“ Messenger

Ã€ chaque crÃ©ation ou mise Ã  jour dâ€™un produit :

un message ProductUpdatedMessage(productId) est dispatchÃ© via Symfony Messenger

un handler dÃ©diÃ© traite ce message

Objectif :

dÃ©montrer que Messenger est correctement cÃ¢blÃ©

message, handler et dispatch fonctionnels

Le traitement asynchrone est volontairement minimal, conformÃ©ment au sujet.




ğŸ³ Docker

Le projet est entiÃ¨rement dockerisÃ© :

fichier docker-compose.yml fourni

ğŸ§ª Comment tester rapidement
CrÃ©er une catÃ©gorie
curl -X POST http://localhost:8080/api/categories \
  -H "Content-Type: application/ld+json" \
  -d '{"designation":"CatÃ©gorie A"}'

CrÃ©er un produit
curl -X POST http://localhost:8080/api/products \
  -H "Content-Type: application/ld+json" \
  -d '{"designation":"Produit 1"}'

Affecter une catÃ©gorie Ã  un produit
curl -X PATCH http://localhost:8080/api/products/1 \
  -H "Content-Type: application/merge-patch+json" \
  -d '{"categories":["/api/categories/1"]}'

